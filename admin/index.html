<!DOCTYPE html>
<html lang="fr" ng-controller="adminCtrl">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <script src="../config.js.php" type="text/javascript"></script>
      <!--<script src="../ext/dynatree/jquery/jquery.js" type="text/javascript"></script>-->
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" type="text/javascript"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js" type="text/javascript"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
      <!--<script src="../ext/dynatree/jquery/jquery.cookie.js" type="text/javascript"></script>-->
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
      <script src="https://code.angularjs.org/1.5.5/i18n/angular-locale_fr-fr.js"></script>
      <script src="../bower_components/i18next/i18next.min.js"></script>
      <script src="../bower_components/i18next-xhr-backend/i18nextXHRBackend.min.js"></script>
      <script src="../bower_components/ng-i18next/dist/ng-i18next.min.js"></script>
      <script>
         var rootUrl = '../commonFramework/';
      </script>
      <script src="../commonFramework/modelsManager/modelsManager.js"></script>
      <script src="../commonFramework/sync/syncQueue.js"></script>
      <script src="../shared/models.js"></script>
      <script src="../shared/utils.js"></script>
      <link href="../bower_components/dynatree/dist/skin/ui.dynatree.css" rel="stylesheet" type="text/css">
      <script src="../bower_components/dynatree/dist/jquery.dynatree.min.js" type="text/javascript"></script>
      <script src="../ext/inheritance.js" type="text/javascript"></script>
      <script src="../commonFramework/treeview/treeview.js" type="text/javascript"></script>
      <script src="../bower_components/jschannel/src/jschannel.js"></script>
      <script src="../login/service.js" type="text/javascript"></script>
      <script src="itemsCtrl.js" type="text/javascript"></script>
      <script src="adminUserItemController.js" type="text/javascript"></script>
      <script src="../bower_components/pem-platform/task-xd-pr.js"></script>
      <script src="../task/controller.js" type="text/javascript"></script>
      <script src="../task/directive.js" type="text/javascript"></script>
      <script src="groupsCtrl.js" type="text/javascript"></script>
      <script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"  type="text/javascript"></script>
      <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
      <script src="../bower_components/jQuery-contextMenu/dist/jquery.contextMenu.min.js" type="text/javascript"></script>
      <link href="../bower_components/jQuery-contextMenu/dist/jquery.contextMenu.min.css" rel="stylesheet" type="text/css" >
      <link href="admin.css" rel="stylesheet" type="text/css" >
   </head>
   <body>
      <div ng-show="loginReady" ng-class="loginClass">
         {{loginInnerHtml}}
         <iframe id="loginFrame" class="loginFrame" ng-src="{{loginModuleUrl}}"></iframe>
      </div>
      <div ng-hide="loginReady" class="loginCentered">
         <img src="../images/spinner.gif" height="50px"><p style="margin-top:10px"><strong ng-i18next="admin_retrieving_login"></strong></p>
      </div>
      <div ng-controller="ItemsCtrl" ng-show="userLogged && loginReady">
         <a href="#" class="btn btn-default" ng-click="selectModelName('items')" ng-class="{'items': 'btn-success'}[selectedModelName]"><span ng-i18next="item"></span> : <b>{{ item.strings[0].sTitle }}</b></a>
         <a href="#" class="btn btn-default" ng-click="showItems = !showItems"><i class="glyphicon glyphicon-chevron-up" ng-show="showItems"></i><i class="glyphicon glyphicon-chevron-down" ng-show="!showItems"></i></a>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         <a href="#" class="btn btn-default" ng-click="selectModelName('groups')" ng-class="{'groups': 'btn-success'}[selectedModelName]"><span ng-i18next="group"></span> : <b>{{ group.sName }}</b></a>
         <a href="#" class="btn btn-default" ng-click="showGroups = !showGroups"><i class="glyphicon glyphicon-chevron-up" ng-show="showGroups"></i><i class="glyphicon glyphicon-chevron-down" ng-show="!showGroups"></i></a>
         <br/>
         <table><tr>
            <td ng-show="showItems" style="vertical-align:top">
               <table>
                  <tr>
                     <td>
                        <b ng-i18next="admin_items"></b>
                        <span style="float:right">
<!--
                           <span ng-controller="ItemsSearchCtrl" style="display:inline-block">
                              <a href="#" class="btn btn-xs" ng-click="open()">
                                 <i class="icon-search"></i>
                              </a>
                              <div ng-include='"itemsSearchDialog.html"'></div>
                           </span>
-->
                           <a href="#" class="btn btn-xs" ng-click="twoColumnsItems = !twoColumnsItems" style="display:inline-block">
                              <i ng-show="twoColumnsItems" class="glyphicon glyphicon-chevron-left"></i>
                              <i ng-show="!twoColumnsItems" class="glyphicon glyphicon-chevron-right"></i>
                           </a>
                        </span>
                     </td>
                     <td ng-show="twoColumnsItems" ng-i18next="admin_items_move">
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <div id="treeItems" style="width:300px;overflow: visible;height:500px "></div>
                     </td>
                     <td ng-show="twoColumnsItems">
                        <div id="treeItems2" style="width:300px;overflow: visible;height:500px"></div>
                     </td>
                  </tr>
               </table>
            </td>
            <td ng-show="showGroups" style="vertical-align:top">
               <table>
                  <tr>
                     <td>
                        <b ng-i18next="admin_groups"></b>
                        <span style="float:right">
<!--
                           <span ng-controller="GroupsSearchCtrl" style="display:inline-block">
                              <a href="#" class="btn btn-xs" ng-click="open()">
                                 <i class="icon-search"></i>
                              </a>
                              <div ng-include='"groupsSearchDialog.html"'></div>
                           </span>
-->
                           <a href="#" class="btn btn-xs" ng-click="twoColumnsGroups = !twoColumnsGroups" style="display:inline-block">
                              <i ng-show="twoColumnsGroups" class="glyphicon glyphicon-chevron-left"></i>
                              <i ng-show="!twoColumnsGroups" class="glyphicon glyphicon-chevron-right"></i>
                           </a>
                        </span>
                     </td>
                     <td ng-show="twoColumnsGroups" ng-i18next="admin_groups_move">
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <div id="treeGroups" style="width:300px;overflow: visible;height:500px "></div>
                     </td>
                     <td ng-show="twoColumnsGroups">
                        <div id="treeGroups2" style="width:300px;overflow: visible;height:500px"></div>
                     </td>
                  </tr>
               </table>
            </td>
            <td style="vertical-align:top">
               <span  ng-show="selectedModelName == 'items'">
                  <uib-tabset>
                     <uib-tab heading="{{'admin_item_settings' | i18next}}"><div ng-include='"tabs/items_params.html"'></div></uib-tab>
                     <uib-tab heading="{{'admin_texts' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bCachedMangerAccess"><div ng-include='"tabs/items_texts.html"'></div></uib-tab>
                     <uib-tab heading="{{'admin_edit' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bCachedMangerAccess">TODO : édition de l'item sur l'interface tasks (si c'est un sujet ou un cours)</uib-tab>
                     <uib-tab heading="{{'admin_preview' | i18next}}" ng-show="group_item.bCachedFullAccess || group_item.bOwnerAccess || group_item.bCachedAccessSolutions || group_item.bCachedMangerAccess"><div ng-include="'tabs/items_preview.html'"></div></uib-tab>
                     <uib-tab heading="{{'admin_access' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bCachedMangerAccess"><div ng-include="'tabs/items_access.html'"></div></uib-tab>
                     <uib-tab heading="{{'admin_summary' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bAccessSolutions || group_item.bCachedMangerAccess"><div ng-include="'tabs/items_progression.html'"></div></uib-tab>
                     <uib-tab heading="{{'admin_stats' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bCachedMangerAccess">TODO</uib-tab>
                  </uib-tabset>
               </span>
               <span ng-show="selectedModelName == 'groups'">
                  <uib-tabset>
                     <uib-tab heading="{{'admin_group_settings' | i18next}}"><div ng-include='"tabs/groups_params.html"'></div></uib-tab>
                     <!--<tab ng-show="user" heading="Utilisateur associé"><div ng-include='"tabs/users_params.html"'></div></tab>-->
                     <uib-tab heading="{{'admin_access' | i18next}}"><div ng-include='"tabs/items_access.html"'></div></uib-tab>
                     <uib-tab heading="{{'admin_summary' | i18next}}" ng-show="group_item.bOwnerAccess || group_item.bAccessSolutions || group_item.bCachedMangerAccess"><div ng-include="'tabs/items_progression.html'"></div></uib-tab>
                  </uib-tabset>
               </span>
            </td>
         </tr></table>
      </div>
         <script>
  window.i18next.use(window.i18nextXHRBackend);
  window.i18next.init({
    'lng': config.domains.current.defaultLanguage,
    'fallbackLng': ['en'],
    'fallbackNS': 'algorea',
    'debug': true,
    'ns': config.domains.current.customStringsName ? [config.domains.current.customStringsName, 'commonFramework', 'algorea'] : ['commonFramework', 'algorea'],
    'backend' : {
      'allowMultiLoading' : false,
      'loadPath' : '/i18n/{{lng}}/{{ns}}.json'
    }
  });
  window.i18next.on('initialized', function (options) {
    console.error('test');
    window.i18nextOptions = options;
    angular.bootstrap(document, ['algorea']);
  });
</script>
   </body>
</html>
